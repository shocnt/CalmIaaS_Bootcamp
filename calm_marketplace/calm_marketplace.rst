.. _calm_marketplace:

-----------------
Calm: マーケットプレイス
-----------------

概要
++++++++

この演習では、Nutanixマーケットプレイス内でCalmブループリントを管理する方法を学びます。演習の一環として、事前に設定されたブループリントをローカルのマーケットプレイスに公開し、編集のためにマーケットプレイスからブループリントをクローンし、アプリケーションを起動します。

マーケットプレイスマネージャーからのブループリントの公開
..............................................

デフォルトでは、Calmには、複数のオープンソースおよびエンタープライズアプリケーション用に検証済みのブループリントが事前にシードされています。Marketplace Manager は、デフォルトのブループリントやユーザーが作成したブループリントをローカルのマーケットプレイスに公開するためのステージングエリアとして機能します。マーケットプレイスはアプリケーションストアとして機能し、利用可能なアプリケーションのカタログをエンドユーザーに提供します。

#. **Prism Central > Calm** から、 |mktmgr-icon| **Marketplace Manager** のサイドバーを選択します。

#. **Marketplace Blueprints** から **Mongo** を選択します。

.. note:: ブループリントの説明には、ライセンス、ハードウェア要件、OS、サポートされているプラットフォーム、制限事項などの重要な情報が含まれています。

#. 右側のドロップダウンから **Calm** プロジェクトを選択し、 **公開** をクリックします。

.. figure:: images/5.10/marketplace_p1_1.png

#. ブループリントの **ステータス** が **公開された** と表示されるのを待ちます。

.. figure:: images/5.10/marketplace_p1_2.png

#. **共有するプロジェクト** において、 **Calm** プロジェクトを選択し、 **Apply** をクリックします。

.. figure:: images/5.10/marketplace_p1_3.png

.. note::

  **共有するプロジェクト** のドロップダウンメニューが利用できない場合は、ブラウザを更新してください。

マーケットプレイスからのブループリントのクローン
...................................

#. **Prism Central > Calm** から、 |mkt-icon| **Marketplace** をサイドバーから選びます。Marketplace Managerで公開されているすべてのブループリントは、ここで見ることができます。

.. figure:: images/5.10/marketplace_p1_4.png

#. **Mongo** ブループリントを選択し、 **クローン** をクリックします。

.. note::

  **ブループリントに含まれるアクション** を選択すると、作成、開始、停止、削除、更新、スケールアップ、スケールダウンなど、特定のブループリントに実装されているアクションが表示されます。

.. figure:: images/5.10/marketplace_p1_5.png

#. 以下のフィールドに必要事項を記入し、 **クローン** をクリックします。

- **ブループリント名** - MongoDB-<あなたのイニシャル>
- **プロジェクト** - Calm

クローンしたブループリントの編集
........................

#. |bp-icon| **Blueprints** をサイドバーから選び、 **MongoDB-<あなたのイニシャル>** を選択します。

.. figure:: images/5.10/marketplace_p1_6.png

#. :fa:`exclamation-circle` をクリックすると、ブループリントのデプロイを成功させることができないエラーのリストを確認することができます。

.. figure:: images/5.10/marketplace_p1_7.png

#. **認証情報** をクリックし、 **CENTOS (Default)** を選択します。

#. 以下のフィールドに必要事項を記入し、 **戻る** をクリックします。

- **ユーザ名** - root
- **秘密のタイプ** - Password
- **パスワード** - nutanix/4u

#. **Mongo_ConfigSet** サービスを選択し、 **設定ペイン** で以下の変更を行います。

- **VM設定 > Image** を **CentOS** に変更します。
- **Network Adapters > NIC** を **Primary** に変更します。
- **接続 > 認証情報** を **CENTOS** に変更します。
- **Guest Customization** のチェックを外します。

#. これらの手順を **Mongo_Router** と **Mongo_ReplicaSet** サービスに対して繰り返します。

#. **保存** をクリックします。

#. **起動** をクリックします。 **アプリケーション名** (例: MongoDB-<あなたのイニシャル>-1) を指定して **作成** をクリックします。

.. figure:: images/5.10/marketplace_p1_8.png

終わりに
+++++++++

- Nutanix マーケットプレイスから事前に定義されたブループリントを使用することで、ユーザーは新しいアプリケーションを素早く試すことができます。
- マーケットプレイスのブループリントは、ユーザーのニーズに合わせて複製したり、変更したりすることができます。
- マーケットプレイスブループリントは、ローカルディスクイメージを使用したり、関連するディスクイメージを自動的にダウンロードしたりすることができます。ユーザーは、独自のキーを作成し、それをブループリントに（cloud-initやsysprepを介して）入力してアクセスを制御することができます。
- 開発者は、ブループリントをマーケットプレイスに公開して、ユーザーが素早く簡単に利用できるようにすることができます。
- ブループリントは、ユーザーによる追加設定なしにマーケットプレイスから直接起動でき、エンド・ユーザーにパブリック・クラウドのようなSaaSエクスペリエンスを提供します。
- 管理者は、マーケットプレイスに公開されるブループリントの内容や、公開されたブループリントへのアクセス権を持つプロジェクトを管理することができます。

.. |proj-icon| image:: ../images/projects_icon.png
.. |mktmgr-icon| image:: ../images/marketplacemanager_icon.png
.. |mkt-icon| image:: ../images/marketplace_icon.png
.. |bp-icon| image:: ../images/blueprints_icon.png
